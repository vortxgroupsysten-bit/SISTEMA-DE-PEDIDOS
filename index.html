<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gar√ßom Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #121212; --card-bg: #1e1e1e; --sidebar-bg: #181818;
            --primary: #ff9f43; --accent: #ff6b6b; --text-light: #f1f1f1;
            --text-dim: #a5a5a5; --success: #1dd1a1;
        }
        * { box-sizing: border-box; outline: none; }
        body {
            font-family: 'Poppins', sans-serif; margin: 0; background-color: var(--bg-color);
            color: var(--text-light); display: flex; height: 100vh; overflow: hidden;
        }

        /* --- NOTIFICA√á√ÉO (TOAST) --- */
        #notification-container {
            position: fixed; top: 20px; right: 20px; z-index: 1000;
            display: flex; flex-direction: column; gap: 10px;
        }
        .toast {
            background: #252525; border-left: 5px solid var(--success);
            color: white; padding: 15px 20px; border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); min-width: 280px;
            animation: slideInRight 0.5s ease forwards; display: flex; align-items: center; justify-content: space-between;
        }
        .toast-content strong { display: block; color: var(--success); font-size: 1.1rem; }
        .toast-content small { color: #ccc; }
        .toast-close { background: none; border: none; color: #777; cursor: pointer; font-size: 1.2rem; }
        
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        /* --- LAYOUT PADR√ÉO (Mantido) --- */
        .menu-area { flex: 2; padding: 20px; overflow-y: auto; }
        .category-tabs { display: flex; gap: 15px; margin-bottom: 25px; position: sticky; top: 0; z-index: 10; background: var(--bg-color); padding: 10px 0; }
        .tab-btn { background: var(--card-bg); border: 1px solid #333; color: var(--text-dim); padding: 12px 30px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 1; text-transform: uppercase; }
        .tab-btn.active, .tab-btn:hover { background: var(--primary); color: #fff; border-color: var(--primary); }
        .section-title { font-size: 1.2rem; margin-bottom: 15px; color: var(--text-dim); border-bottom: 1px solid #333; padding-bottom: 5px; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 40px; }
        .product-card { background: var(--card-bg); border-radius: 10px; padding: 20px; border: 1px solid #333; display: flex; flex-direction: column; justify-content: space-between; height: 160px; position: relative; overflow: hidden; }
        .product-card::before { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 4px; background: var(--primary); }
        .product-card:hover { transform: translateY(-3px); background: #252525; border-color: var(--primary); }
        .product-info h3 { margin: 0 0 10px 0; font-size: 1.1rem; font-weight: 600; color: #fff; }
        .product-price { font-size: 1.4rem; color: var(--primary); font-weight: bold; }
        .btn-add { width: 100%; padding: 10px; background: #333; border: none; color: #fff; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: auto; }
        .btn-add:hover { background: var(--primary); color: white; }
        .sidebar { flex: 1; max-width: 380px; background: var(--sidebar-bg); display: flex; flex-direction: column; border-left: 1px solid #333; }
        .sidebar-header { padding: 25px; background: #202020; border-bottom: 1px solid #333; }
        .input-group label { display: block; font-size: 0.75rem; color: var(--text-dim); margin-bottom: 5px; letter-spacing: 1px; }
        .input-modern { width: 100%; padding: 12px; background: #2a2a2a; border: 1px solid #444; border-radius: 6px; color: white; font-family: inherit; margin-bottom: 15px; }
        .cart-area { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-item { background: #252525; padding: 15px; border-radius: 8px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 2px solid var(--text-dim); }
        .qty-controls { display: flex; align-items: center; gap: 10px; background: #151515; padding: 4px; border-radius: 20px; }
        .qty-btn { width: 24px; height: 24px; border-radius: 50%; border: none; background: #333; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .footer-total { padding: 25px; background: #202020; border-top: 1px solid #333; }
        .total-row { display: flex; justify-content: space-between; font-size: 1.4rem; font-weight: bold; margin-bottom: 15px; }
        .btn-confirm { width: 100%; padding: 15px; background: var(--success); color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        @media (max-width: 900px) { body { flex-direction: column; overflow: auto; } .sidebar { max-width: 100%; border-left: none; border-top: 2px solid var(--primary); } .menu-area { overflow: visible; } #notification-container { right: 0; width: 100%; padding: 10px; } }
    </style>
</head>
<body>
    <div id="notification-container"></div>

    <div class="menu-area">
        <div class="category-tabs">
            <button class="tab-btn active" onclick="scrollToId('food-section')">Comidas</button>
            <button class="tab-btn" onclick="scrollToId('drink-section')">Bebidas</button>
        </div>
        <div id="food-section">
            <h2 class="section-title">Pratos & Lanches</h2>
            <div class="menu-grid" id="food-container"></div>
        </div>
        <div id="drink-section">
            <h2 class="section-title">Bebidas</h2>
            <div class="menu-grid" id="drink-container"></div>
        </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-header">
            <div class="input-group">
                <label>GAR√áOM</label>
                <input type="text" id="waiter-name" class="input-modern" placeholder="Nome...">
            </div>
            <div class="input-group" style="margin-bottom:0;">
                <label>MESA</label>
                <input type="number" id="table-num" class="input-modern" placeholder="N¬∫" style="margin-bottom:0;">
            </div>
        </div>
        <div class="cart-area" id="cart-list">
            <div style="text-align:center; color:var(--text-dim); margin-top:40px;"><p>Carrinho Vazio</p></div>
        </div>
        <div class="footer-total">
            <div class="total-row"><span>Total</span><span>R$ <span id="total-price">0.00</span></span></div>
            <button class="btn-confirm" onclick="sendOrder()">Confirmar</button>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, name: "X-Burger Artesanal", price: 25.00, type: "food" },
            { id: 2, name: "Batata Frita Suprema", price: 15.00, type: "food" },
            { id: 3, name: "Pizza Mozzarella", price: 32.00, type: "food" },
            { id: 4, name: "Frango a Passarinho", price: 35.00, type: "food" },
            { id: 5, name: "Coca-Cola Lata", price: 6.00, type: "drink" },
            { id: 6, name: "Suco de Laranja", price: 8.00, type: "drink" },
            { id: 7, name: "√Ågua Mineral", price: 4.00, type: "drink" },
            { id: 8, name: "Cerveja Long Neck", price: 12.00, type: "drink" }
        ];
        let cart = [];

        window.onload = () => {
            products.forEach(p => {
                const card = `
                    <div class="product-card">
                        <div class="product-info"><h3>${p.name}</h3><div class="product-price">R$ ${p.price.toFixed(2)}</div></div>
                        <button class="btn-add" onclick="addToCart(${p.id})">ADICIONAR</button>
                    </div>`;
                document.getElementById(p.type === 'food' ? 'food-container' : 'drink-container').innerHTML += card;
            });
            // Inicia verifica√ß√£o de notifica√ß√µes
            setInterval(checkNotifications, 3000);
        };

        function addToCart(id) {
            const item = products.find(p => p.id === id);
            const existing = cart.find(i => i.id === id);
            existing ? existing.qty++ : cart.push({ ...item, qty: 1 });
            updateCartUI();
        }
        function changeQty(id, delta) {
            const item = cart.find(i => i.id === id);
            item.qty += delta;
            if (item.qty <= 0) cart = cart.filter(i => i.id !== id);
            updateCartUI();
        }
        function updateCartUI() {
            const list = document.getElementById('cart-list'); list.innerHTML = ''; let total = 0;
            if (cart.length === 0) list.innerHTML = '<div style="text-align:center; color:var(--text-dim); margin-top:40px;"><p>Carrinho Vazio</p></div>';
            else cart.forEach(i => { total += i.price * i.qty; list.innerHTML += `<div class="cart-item"><div style="flex:1;"><strong style="display:block;">${i.name}</strong><small style="color:var(--text-dim)">R$ ${i.price.toFixed(2)}</small></div><div class="qty-controls"><button class="qty-btn" onclick="changeQty(${i.id}, -1)">-</button><span style="font-weight:bold; font-size:0.9rem;">${i.qty}</span><button class="qty-btn" onclick="changeQty(${i.id}, 1)">+</button></div></div>`; });
            document.getElementById('total-price').innerText = total.toFixed(2);
        }
        function sendOrder() {
            const waiter = document.getElementById('waiter-name').value.trim();
            const table = document.getElementById('table-num').value;
            if (!waiter || !table || cart.length === 0) return alert("‚ö†Ô∏è Preencha Gar√ßom, Mesa e Itens!");
            
            const order = { id: Date.now(), table, waiter, items: cart, total: document.getElementById('total-price').innerText, time: new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'}) };
            const currentOrders = JSON.parse(localStorage.getItem('restaurantOrders')) || [];
            currentOrders.push(order);
            localStorage.setItem('restaurantOrders', JSON.stringify(currentOrders));

            const btn = document.querySelector('.btn-confirm'); btn.innerText = "ENVIADO! ‚úÖ"; btn.style.background = "#1abc9c";
            setTimeout(() => { cart = []; updateCartUI(); document.getElementById('table-num').value = ''; btn.innerText = "CONFIRMAR"; btn.style.background = "var(--success)"; }, 1500);
        }
        function scrollToId(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); event.target.classList.add('active'); }

        // --- SISTEMA DE NOTIFICA√á√ÉO ---
        function checkNotifications() {
            const notifications = JSON.parse(localStorage.getItem('restaurantNotifications')) || [];
            if (notifications.length > 0) {
                // Toca som (URL de um som curto)
                const audio = new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg');
                audio.play().catch(e => console.log("Audio play blocked by browser policy"));

                notifications.forEach(notif => {
                    showToast(notif.msg, notif.waiter);
                });
                
                // Limpa notifica√ß√µes para n√£o repetir
                localStorage.setItem('restaurantNotifications', '[]');
            }
        }

        function showToast(message, waiterName) {
            const container = document.getElementById('notification-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="toast-content">
                    <strong>üîî PEDIDO PRONTO!</strong>
                    <span>${message}</span><br>
                    <small>Aten√ß√£o: ${waiterName}</small>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">‚úï</button>
            `;
            container.appendChild(toast);

            // Remove automaticamente ap√≥s 7 segundos
            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.5s forwards';
                setTimeout(() => toast.remove(), 500);
            }, 7000);
        }
    </script>
</body>
</html>
