<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App do Gar√ßom</title>
    <style>
        :root { --primary: #ff6b6b; --dark: #333; --light: #f4f4f4; }
        body { font-family: sans-serif; margin: 0; background-color: var(--light); display: flex; height: 100vh; }
        
        .main-content { flex: 2; padding: 20px; overflow-y: auto; }
        .sidebar { flex: 1; background: white; padding: 20px; box-shadow: -2px 0 5px rgba(0,0,0,0.1); display: flex; flex-direction: column; }

        h2 { border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .item-card { background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .item-card img { width: 100%; height: 100px; object-fit: cover; border-radius: 4px; background: #ddd; }
        .price { color: var(--primary); font-weight: bold; margin: 10px 0; }
        .add-btn { background: var(--dark); color: white; border: none; padding: 8px; width: 100%; cursor: pointer; border-radius: 4px;}
        .add-btn:hover { background: var(--primary); }

        /* Inputs do Pedido */
        .order-inputs input { width: 100%; padding: 12px; margin-bottom: 10px; font-size: 16px; border: 2px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        .order-inputs input:focus { border-color: var(--primary); outline: none; }
        
        .cart-items { flex: 1; overflow-y: auto; margin-bottom: 15px; border-top: 1px solid #eee; padding-top: 10px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding: 8px 0; font-size: 0.9em; }
        .cart-controls button { width: 25px; height: 25px; cursor: pointer; border: 1px solid #ccc; background: #fff; }
        
        .confirm-btn { background: #28a745; color: white; border: none; padding: 15px; width: 100%; font-size: 18px; cursor: pointer; border-radius: 4px; font-weight: bold; }
        
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { height: 50vh; order: 2; }
            .main-content { height: 50vh; order: 1; }
        }
    </style>
</head>
<body>

    <div class="main-content">
        <h2>üçî Comidas</h2>
        <div class="menu-grid" id="food-container"></div>

        <h2 style="margin-top: 30px;">ü•§ Bebidas</h2>
        <div class="menu-grid" id="drink-container"></div>
    </div>

    <div class="sidebar">
        <div class="order-inputs">
            <h3>Novo Pedido</h3>
            <input type="text" id="waiter-name" placeholder="Nome do Gar√ßom (Obrigat√≥rio)">
            <input type="number" id="table-num" placeholder="N√∫mero da Mesa" min="1">
        </div>

        <div class="cart-items" id="cart-list">
            <p style="text-align:center; color:#888;">Carrinho vazio</p>
        </div>

        <div style="text-align: right; margin-bottom: 10px; font-weight: bold; font-size: 1.2em;">
            Total: R$ <span id="total-price">0.00</span>
        </div>
        <button class="confirm-btn" onclick="sendOrder()">ENVIAR PARA COZINHA</button>
    </div>

    <script>
        const products = [
            { id: 1, name: "X-Burger", price: 25.00, type: "food", img: "https://via.placeholder.com/150?text=Burger" },
            { id: 2, name: "Batata Frita", price: 15.00, type: "food", img: "https://via.placeholder.com/150?text=Fritas" },
            { id: 3, name: "Pizza Fatia", price: 12.00, type: "food", img: "https://via.placeholder.com/150?text=Pizza" },
            { id: 4, name: "Coca-Cola", price: 6.00, type: "drink", img: "https://via.placeholder.com/150?text=Cola" },
            { id: 5, name: "Suco Natural", price: 8.00, type: "drink", img: "https://via.placeholder.com/150?text=Suco" },
            { id: 6, name: "√Ågua", price: 4.00, type: "drink", img: "https://via.placeholder.com/150?text=Agua" }
        ];

        let cart = [];

        window.onload = () => {
            products.forEach(p => {
                const card = `
                    <div class="item-card">
                        <img src="${p.img}">
                        <h4>${p.name}</h4>
                        <div class="price">R$ ${p.price.toFixed(2)}</div>
                        <button class="add-btn" onclick="addToCart(${p.id})">Adicionar</button>
                    </div>`;
                document.getElementById(p.type === 'food' ? 'food-container' : 'drink-container').innerHTML += card;
            });
        };

        function addToCart(id) {
            const item = products.find(p => p.id === id);
            const existing = cart.find(i => i.id === id);
            existing ? existing.qty++ : cart.push({ ...item, qty: 1 });
            renderCart();
        }

        function changeQty(id, delta) {
            const item = cart.find(i => i.id === id);
            item.qty += delta;
            if (item.qty <= 0) cart = cart.filter(i => i.id !== id);
            renderCart();
        }

        function renderCart() {
            const list = document.getElementById('cart-list');
            list.innerHTML = '';
            let total = 0;
            cart.forEach(i => {
                total += i.price * i.qty;
                list.innerHTML += `
                    <div class="cart-item">
                        <div>${i.name}<br><small>R$ ${i.price.toFixed(2)}</small></div>
                        <div class="cart-controls">
                            <button onclick="changeQty(${i.id}, -1)">-</button> <span>${i.qty}</span> <button onclick="changeQty(${i.id}, 1)">+</button>
                        </div>
                    </div>`;
            });
            document.getElementById('total-price').innerText = total.toFixed(2);
            if(cart.length === 0) list.innerHTML = '<p style="text-align:center; color:#888;">Carrinho vazio</p>';
        }

        function sendOrder() {
            const waiter = document.getElementById('waiter-name').value.trim();
            const table = document.getElementById('table-num').value;
            
            if (!waiter) return alert("Digite o NOME DO GAR√áOM!");
            if (!table) return alert("Digite o N√öMERO DA MESA!");
            if (cart.length === 0) return alert("Adicione itens ao pedido!");

            const order = {
                id: Date.now(),
                table: table,
                waiter: waiter, // Enviando o nome do gar√ßom
                items: cart,
                total: document.getElementById('total-price').innerText,
                time: new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'})
            };

            const currentOrders = JSON.parse(localStorage.getItem('restaurantOrders')) || [];
            currentOrders.push(order);
            localStorage.setItem('restaurantOrders', JSON.stringify(currentOrders));

            cart = [];
            document.getElementById('table-num').value = '';
            // N√£o limpamos o nome do gar√ßom para facilitar o pr√≥ximo pedido dele
            renderCart();
            alert(`Pedido enviado! (Gar√ßom: ${waiter})`);
        }
    </script>
</body>
</html>
